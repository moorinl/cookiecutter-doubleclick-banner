<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>{{ cookiecutter.banner_name }} {{ cookiecutter.width }}x{{ cookiecutter.height }}</title>
    </head>
    <body>
        <div id="bg-exit"></div>
        <script src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>
        <script>
            if (!Enabler.isInitialized()) {
                Enabler.addEventListener(studio.events.StudioEvent.INIT, enablerInitialized);
            } else {
                enablerInitialized();
            }

            function enablerInitialized() {
                if (Enabler.isPageLoaded()) {
                    politeInit();
                } else {
                    Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED, politeInit);
                }
            }

            function politeLoad(urls, onComplete) {
                var l = urls.length,
                    loaded = 0,
                    checkProgress = function() {
                        if (++loaded === l && onComplete) {
                            onComplete();
                        }
                    },
                    i;
                for (i = 0; i < l; i++) {
                    Enabler.loadScript(urls[i], checkProgress);
                }
            }

            function politeInit() {
                var extCSS=document.createElement("link");
                extCSS.setAttribute("rel", "stylesheet");
                extCSS.setAttribute("type", "text/css");
                extCSS.setAttribute("href", Enabler.getFilename("{{ cookiecutter.banner_slug }}_{{ cookiecutter.width }}x{{ cookiecutter.height }}.css")); 
                document.getElementsByTagName("head")[0].appendChild(extCSS);

                politeLoad([
                    {% if cookiecutter.use_easeljs == "yes" %}"https://s0.2mdn.net/ads/studio/cached_libs/easeljs_0.8.2_937c3ec68021211c056f61c9ceaccffd_min.js",{% endif %}
                    {% if cookiecutter.use_movieclip == "yes" %}"https://s0.2mdn.net/ads/studio/cached_libs/movieclip_0.8.1_927f07f1635e6a2a1aa76e79f9decf86_min.js",{% endif %}
                    {% if cookiecutter.use_preloadjs == "yes" %}"https://s0.2mdn.net/ads/studio/cached_libs/preloadjs_0.6.2_d7b96570d4552592ae479162e546cb25_min.js",{% endif %}
                    {% if cookiecutter.use_soundjs == "yes" %}"https://s0.2mdn.net/ads/studio/cached_libs/soundjs_0.6.2_4c1425ce52ff873d9fb7aa4daf23b94d_min.js",{% endif %}
                    {% if cookiecutter.use_tweenjs == "yes" %}"https://s0.2mdn.net/ads/studio/cached_libs/tweenjs_0.6.2_47653fa176057626486243bdc9dbf342_min.js",{% endif %}
                    "{{ cookiecutter.banner_slug }}_{{ cookiecutter.width }}x{{ cookiecutter.height }}.js"
                ], function() {
                    Banner.init();
                })
            }
        </script>
        <script>
            function bgExitHandler(e) {
                Enabler.exit('Background Exit');
            }

            document.getElementById('bg-exit').addEventListener('click', bgExitHandler, false);
        </script>
    </body>
</html>